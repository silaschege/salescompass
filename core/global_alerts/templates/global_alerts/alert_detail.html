{% extends "global_alerts/base.html" %}

{% block title %}{{ alert.title }} - Alert Detail{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>{{ alert.title }}</h1>
        <div>
            <a href="{% url 'global_alerts:alert_update' alert.pk %}" class="btn btn-primary">Edit</a>
            <a href="{% url 'global_alerts:alert_delete' alert.pk %}" class="btn btn-danger">Delete</a>
        </div>
    </div>

    <div class="card mb-4">
        <div class="card-header">
            <h5>Alert Content</h5>
        </div>
        <div class="card-body">
            <div class="alert {{ alert.css_class }}">
                <strong>{{ alert.title }}</strong><br>
                {{ alert.message }}
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6 mb-4">
            <div class="card">
                <div class="card-header">
                    <h5>Basic Info</h5>
                </div>
                <div class="card-body">
                    <table class="table table-borderless">
                        <tr>
                            <th>Type:</th>
                            <td>{{ alert.get_alert_type_display }}</td>
                        </tr>
                        <tr>
                            <th>Severity:</th>
                            <td><span class="badge bg-{{ alert.severity }}">{{ alert.get_severity_display }}</span></td>
                        </tr>
                        <tr>
                            <th>Status:</th>
                            <td>{% if alert.is_currently_active %}<span class="badge bg-success">Active</span>{% else
                                %}<span class="badge bg-secondary">Inactive</span>{% endif %}</td>
                        </tr>
                        <tr>
                            <th>Start:</th>
                            <td>{{ alert.start_time|date:"Y-m-d H:i" }}</td>
                        </tr>
                        <tr>
                            <th>End:</th>
                            <td>{{ alert.end_time|date:"Y-m-d H:i"|default:"No end time" }}</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

        <div class="col-md-6 mb-4">
            <div class="card">
                <div class="card-header">
                    <h5>Targeting & Display</h5>
                </div>
                <div class="card-body">
                    <table class="table table-borderless">
                        <tr>
                            <th>Scope:</th>
                            <td>{% if alert.is_global %}Global (All Tenants){% else %}Tenant-Specific{% endif %}</td>
                        </tr>
                        <tr>
                            <th>Dismissible:</th>
                            <td>{{ alert.is_dismissible|yesno:"Yes,No" }}</td>
                        </tr>
                        <tr>
                            <th>Show on all pages:</th>
                            <td>{{ alert.show_on_all_pages|yesno:"Yes,No" }}</td>
                        </tr>
                        <tr>
                            <th>Created by:</th>
                            <td>{{ alert.created_by }}</td>
                        </tr>
                        <tr>
                            <th>Created:</th>
                            <td>{{ alert.created_at|date:"Y-m-d H:i" }}</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}