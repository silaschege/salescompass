{% extends "automation/base.html" %}

{% block title %}Workflow Execution Details - SalesCompass{% endblock %}

{% block content %}
<div class="container">
    <h1>Workflow Execution Details</h1>
    
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">Execution ID: {{ workflow_execution.id }}</h5>
            <p class="card-text"><strong>Workflow:</strong> {{ workflow_execution.workflow.workflow_name }}</p>
            <p class="card-text"><strong>Status:</strong> 
                {% if workflow_execution.workflow_execution_status == 'completed' %}
                    <span class="badge bg-success">{{ workflow_execution.workflow_execution_status }}</span>
                {% elif workflow_execution.workflow_execution_status == 'failed' %}
                    <span class="badge bg-danger">{{ workflow_execution.workflow_execution_status }}</span>
                {% elif workflow_execution.workflow_execution_status == 'running' %}
                    <span class="badge bg-warning">{{ workflow_execution.workflow_execution_status }}</span>
                {% else %}
                    <span class="badge bg-secondary">{{ workflow_execution.workflow_execution_status }}</span>
                {% endif %}
            </p>
            <p class="card-text"><strong>Payload:</strong> {{ workflow_execution.workflow_execution_trigger_payload }}</p>
            <p class="card-text"><strong>Error Message:</strong> {{ workflow_execution.workflow_execution_error_message }}</p>
            <p class="card-text"><strong>Executed At:</strong> {{ workflow_execution.workflow_execution_executed_at }}</p>
            <p class="card-text"><strong>Completed At:</strong> {{ workflow_execution.workflow_execution_completed_at }}</p>
            <p class="card-text"><strong>Execution Time (ms):</strong> {{ workflow_execution.workflow_execution_execution_time_ms }}</p>
            <p class="card-text"><strong>Created:</strong> {{ workflow_execution.workflow_execution_created_at }}</p>
            <p class="card-text"><strong>Updated:</strong> {{ workflow_execution.workflow_execution_updated_at }}</p>
        </div>
    
    <div class="mt-3">
        <a href="{% url 'automation:workflow_execution_list' %}" class="btn btn-secondary">Back to List</a>
        {% if perms.automation.write %}
        <a href="{% url 'automation:workflow_execution_update' workflow_execution.id %}" class="btn btn-warning">Edit</a>
        {% endif %}
    </div>
</div>
{% endblock %}
