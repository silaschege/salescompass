{% extends "marketing/base.html" %}

{% block title %}Campaign Calendar - SalesCompass{% endblock %}

{% block content %}
<div class="header-bar mb-4">
    <div class="container">
        <h1 class="block-title">Campaign Calendar</h1>
        <p class="text-white text-center lead">Visualize and manage your marketing schedule</p>
    </div>
</div>

<div class="container">
    <div class="card shadow-sm mb-4">
        <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <a href="{% url 'marketing:campaign_create' %}" class="btn btn-primary shadow-sm">
                        <i class="bi bi-plus-lg"></i> New Campaign
                    </a>
                </div>
                <div class="d-flex gap-2">
                    <span class="badge bg-secondary">Draft</span>
                    <span class="badge bg-info">Scheduled</span>
                    <span class="badge bg-warning">Sending</span>
                    <span class="badge bg-success">Sent</span>
                </div>
            </div>

            <div id='calendar' class="bg-white p-3 rounded"></div>
        </div>
    </div>
</div>

<style>
    #calendar {
        min-height: 600px;
    }

    .fc-event {
        cursor: pointer;
        padding: 2px 4px;
        font-size: 0.85em;
        border: none !important;
        border-radius: 4px;
    }

    .fc-event-draft {
        background-color: #6c757d !important;
    }

    .fc-event-scheduled {
        background-color: #0dcaf0 !important;
    }

    .fc-event-sending {
        background-color: #ffc107 !important;
        color: #212529 !important;
    }

    .fc-event-sent {
        background-color: #198754 !important;
    }

    .fc-event-paused {
        background-color: #fd7e14 !important;
    }

    .fc-event-cancelled {
        background-color: #dc3545 !important;
    }

    .fc-toolbar-title {
        color: #6f42c1;
        font-weight: 600;
    }

    .fc-button-primary {
        background-color: #6f42c1 !important;
        border-color: #6f42c1 !important;
    }

    .fc-button-primary:hover {
        background-color: #5a32a3 !important;
        border-color: #5a32a3 !important;
    }
</style>

<!-- FullCalendar -->
<link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.css' rel='stylesheet' />
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const calendarEl = document.getElementById('calendar');
        const calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            headerToolbar: {
                left: 'prev,next today',
                center: 'title',
                right: 'dayGridMonth,timeGridWeek,timeGridDay'
            },
            themeSystem: 'bootstrap5',
            events: {{ events_json| safe }},
        eventClick: function (info) {
            if (info.event.url) {
                window.location.href = info.event.url;
                info.jsEvent.preventDefault();
            }
        },
        eventClassNames: function (arg) {
            return [`fc-event-${arg.event.extendedProps.status}`];
        },
        height: 'auto'
        });
    calendar.render();
    });
</script>
{% endblock %}