{% extends 'core/base_module.html' %}

{% block title %}Tenant Management - SalesCompass{% endblock %}

{% block extra_css %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
{% endblock %}

{% block module_nav %}
<!-- Tenant Management -->
<a class="nav-link dropdown-toggle" href="#" data-bs-toggle="collapse" data-bs-target="#tenantMgmtMenu">
    <i class="bi bi-building"></i> Tenant Management
</a>
<div class="collapse show" id="tenantMgmtMenu">
    <a class="nav-link ms-3" href="{% url 'tenants:tenant_list' %}">All Tenants</a>
    <a class="nav-link ms-3" href="{% url 'tenants:create' %}">Create New Tenant</a>
    <a class="nav-link ms-3" href="{% url 'tenants:search' %}">Search Tenants</a>
</div>

<!-- Provisioning & Onboarding -->
<a class="nav-link dropdown-toggle" href="#" data-bs-toggle="collapse" data-bs-target="#provisioningMenu">
    <i class="bi bi-rocket-takeoff"></i> Provisioning & Onboarding
</a>
<div class="collapse" id="provisioningMenu">
    <a class="nav-link ms-3 {% if request.resolver_match.url_name == 'provision_tenant' %}active{% endif %}"
        href="{% url 'tenants:provision_tenant' %}">
        Provision Tenant
    </a>
    <a class="nav-link ms-3 {% if request.resolver_match.url_name == 'subdomain_assignment' %}active{% endif %}"
        href="{% url 'tenants:subdomain_assignment' %}">Subdomain Assignment</a>
    <a class="nav-link ms-3 {% if request.resolver_match.url_name == 'database_initialization' %}active{% endif %}"
        href="{% url 'tenants:database_initialization' %}">Database Initialization</a>
    <a class="nav-link ms-3 {% if request.resolver_match.url_name == 'admin_user_setup' %}active{% endif %}"
        href="{% url 'tenants:admin_user_setup' %}">Admin User Setup</a>
</div>

<!-- Lifecycle Management -->
<a class="nav-link dropdown-toggle" href="#" data-bs-toggle="collapse" data-bs-target="#lifecycleMenu">
    <i class="bi bi-arrow-repeat"></i> Lifecycle Management
</a>
<div class="collapse" id="lifecycleMenu">
    <a class="nav-link ms-3 {% if request.resolver_match.url_name == 'lifecycle-dashboard' %}active{% endif %}"
        href="{% url 'tenants:lifecycle-dashboard' %}">Dashboard</a>
    <a class="nav-link ms-3 {% if request.resolver_match.url_name == 'status-management' %}active{% endif %}"
        href="{% url 'tenants:status-management' %}">Status Management</a>
    <a class="nav-link ms-3 {% if request.resolver_match.url_name == 'automated-lifecycle-rules' %}active{% endif %}"
        href="{% url 'tenants:automated-lifecycle-rules' %}">Automation Rules</a>
    <a class="nav-link ms-3 {% if request.resolver_match.url_name == 'data-preservation' %}active{% endif %}"
        href="{% url 'tenants:data-preservation' %}">Data Preservation</a>
    <a class="nav-link ms-3 {% if request.resolver_match.url_name == 'data-restoration' %}active{% endif %}"
        href="{% url 'tenants:data-restoration' %}">Data Restoration</a>
    <a class="nav-link ms-3 {% if request.resolver_match.url_name == 'lifecycle-event-log' %}active{% endif %}"
        href="{% url 'tenants:lifecycle-event-log' %}">Event Log</a>
</div>

<!-- Module Entitlements -->
<a class="nav-link dropdown-toggle" href="#" data-bs-toggle="collapse" data-bs-target="#entitlementsMenu">
    <i class="bi bi-puzzle"></i> Module Entitlements
</a>
<div class="collapse" id="entitlementsMenu">
    <a class="nav-link ms-3 {% if request.resolver_match.url_name == 'plan_selection' %}active{% endif %}"
        href="{% url 'tenants:plan_selection' %}">
        Manage Modules
    </a>
    <a class="nav-link ms-3 {% if request.resolver_match.url_name == 'feature_toggles' %}active{% endif %}"
        href="{% url 'tenants:feature_toggles' %}">Feature Toggles</a>
    <a class="nav-link ms-3 {% if request.resolver_match.url_name == 'usage_limits' %}active{% endif %}"
        href="{% url 'tenants:usage_limits' %}">Usage Limits</a>
    <a class="nav-link ms-3 {% if request.resolver_match.url_name == 'entitlement_templates' %}active{% endif %}"
        href="{% url 'tenants:entitlement_templates' %}">Entitlement Templates</a>
</div>

<!-- Domain & Branding -->
<a class="nav-link dropdown-toggle" href="#" data-bs-toggle="collapse" data-bs-target="#brandingMenu">
    <i class="bi bi-palette"></i> Domain & Branding
</a>
<div class="collapse" id="brandingMenu">
    <a class="nav-link ms-3 {% if request.resolver_match.url_name == 'domain_management_list' %}active{% endif %}"
        href="{% url 'tenants:domain_management_list' %}">Custom Domains</a>
    <a class="nav-link ms-3 {% if request.resolver_match.url_name == 'ssl_certificates' %}active{% endif %}"
        href="{% url 'tenants:ssl_certificates' %}">SSL Certificates</a>
    <a class="nav-link ms-3 {% if request.resolver_match.url_name == 'branding_config_list' %}active{% endif %}"
        href="{% url 'tenants:branding_config_list' %}">Branding Configuration</a>
    <a class="nav-link ms-3 {% if request.resolver_match.url_name == 'logo_management' %}active{% endif %}"
        href="{% url 'tenants:logo_management' %}">Logo Management</a>
</div>

<!-- Billing Oversight -->
<a class="nav-link dropdown-toggle" href="#" data-bs-toggle="collapse" data-bs-target="#billingOversightMenu">
    <i class="bi bi-credit-card"></i> Billing Oversight
</a>
<div class="collapse" id="billingOversightMenu">
    <a class="nav-link ms-3" href="{% url 'billing:portal' %}">Billing Portal</a>
    <a class="nav-link ms-3 {% if request.resolver_match.url_name == 'subscription_overview' %}active{% endif %}"
        href="{% url 'tenants:subscription_overview' %}">Subscription Overview</a>
    <a class="nav-link ms-3 {% if request.resolver_match.url_name == 'revenue_analytics' %}active{% endif %}"
        href="{% url 'tenants:revenue_analytics' %}">Revenue Analytics</a>
</div>

<!-- Settings Configuration -->
<a class="nav-link dropdown-toggle" href="#" data-bs-toggle="collapse" data-bs-target="#settingsConfigMenu">
    <i class="bi bi-sliders"></i> Settings Config
</a>
<div class="collapse" id="settingsConfigMenu">
    <a class="nav-link ms-3 {% if request.resolver_match.url_name == 'setting_list' %}active{% endif %}"
        href="{% url 'tenants:setting_list' %}">Settings</a>
    <a class="nav-link ms-3 {% if request.resolver_match.url_name == 'setting_group_list' %}active{% endif %}"
        href="{% url 'tenants:setting_group_list' %}">Setting Groups</a>
    <a class="nav-link ms-3 {% if request.resolver_match.url_name == 'setting_type_list' %}active{% endif %}"
        href="{% url 'tenants:setting_type_list' %}">Setting Types</a>
</div>
{% endblock %}