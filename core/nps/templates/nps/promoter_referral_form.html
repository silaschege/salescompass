{% extends "nps/base.html" %}

{% block title %}Update Referral - SalesCompass{% endblock %}

{% block content %}
<div class="header-bar mb-4">
    <div class="container">
        <h1 class="block-title">Update Referral Request</h1>
        <p class="text-white text-center lead">Manage referral details for {{ object.promoter_response.account.email }}</p>
    </div>
</div>

<div class="container">
    <!-- Navigation -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="d-flex gap-2">
                <a href="{% url 'nps:nps_dashboard' %}" class="btn btn-outline-primary">Dashboard</a>
                <a href="{% url 'nps:promoter_advocacy' %}" class="btn btn-outline-primary">Promoter Advocacy</a>
                <a href="{% url 'nps:promoter_referrals' %}" class="btn btn-outline-primary">Referral List</a>
            </div>
        </div>
    </div>

    <!-- Referral Form -->
    <div class="row">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">
                    <h5>Referral Details</h5>
                </div>
                <div class="card-body">
                    <form method="post">
                        {% csrf_token %}
                        
                        <!-- Promoter Information -->
                        <div class="mb-4">
                            <h6>Promoter Information</h6>
                            <p><strong>Email:</strong> {{ object.promoter_response.account.email }}</p>
                            <p><strong>NPS Score:</strong> <span class="badge bg-success">{{ object.promoter_response.score }}</span></p>
                            <p><strong>Comment:</strong> {{ object.promoter_response.comment }}</p>
                        </div>
                        
                        <!-- Referral Contact Information -->
                        <div class="mb-3">
                            <label for="{{ form.referred_contact_name.id_for_label }}" class="form-label">Contact Name</label>
                            {{ form.referred_contact_name }}
                        </div>
                        
                        <div class="mb-3">
                            <label for="{{ form.referred_contact_email.id_for_label }}" class="form-label">Contact Email</label>
                            {{ form.referred_contact_email }}
                        </div>
                        
                        <div class="mb-3">
                            <label for="{{ form.referred_contact_phone.id_for_label }}" class="form-label">Contact Phone</label>
                            {{ form.referred_contact_phone }}
                        </div>
                        
                        <div class="mb-3">
                            <label for="{{ form.referred_company_name.id_for_label }}" class="form-label">Company Name</label>
                            {{ form.referred_company_name }}
                        </div>
                        
                        <div class="mb-3">
                            <label for="{{ form.referred_company_domain.id_for_label }}" class="form-label">Company Domain</label>
                            {{ form.referred_company_domain }}
                        </div>
                        
                        <!-- Status and Assignment -->
                        <div class="mb-3">
                            <label for="{{ form.status.id_for_label }}" class="form-label">Status</label>
                            {{ form.status }}
                        </div>
                        
                        <div class="mb-3">
                            <label for="{{ form.assigned_to.id_for_label }}" class="form-label">Assigned To</label>
                            {{ form.assigned_to }}
                        </div>
                        
                        <!-- Deal Information -->
                        <div class="mb-3">
                            <label for="{{ form.deal_value.id_for_label }}" class="form-label">Deal Value ($)</label>
                            {{ form.deal_value }}
                        </div>
                        
                        <!-- Notes -->
                        <div class="mb-3">
                            <label for="{{ form.notes.id_for_label }}" class="form-label">Notes</label>
                            {{ form.notes }}
                        </div>
                        
                        <button type="submit" class="btn btn-primary">Save Changes</button>
                        <a href="{% url 'nps:promoter_referrals' %}" class="btn btn-secondary">Cancel</a>
                    </form>
                </div>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="card">
                <div class="card-header">
                    <h5>Help</h5>
                </div>
                <div class="card-body">
                    <h6>Promoter Referral Best Practices:</h6>
                    <ul>
                        <li>Reach out to promoters within 48 hours of receiving their feedback</li>
                        <li>Review the promoter's comment to understand their enthusiasm level</li>
                        <li>Personalize outreach based on the specific referral opportunity</li>
                        <li>Track all interactions in the notes section</li>
                    </ul>
                    
                    <h6 class="mt-3">Status Definitions:</h6>
                    <ul>
                        <li>Requested: New referral opportunity identified</li>
                        <li>Contacted: Initial outreach made to the promoter</li>
                        <li>Converted: Referral successfully converted to opportunity</li>
                        <li>Not Interested: Promoter declined to participate</li>
                        <li>Closed: Referral process completed</li>
                    </ul>
                    
                    <h6 class="mt-3">Referral Management Tips:</h6>
                    <ul>
                        <li>Assign referrals to the most appropriate team member</li>
                        <li>Estimate deal value based on the referred company's size</li>
                        <li>Document key details in the notes field</li>
                        <li>Follow up regularly on open referrals</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="footer-bar mt-5">
    <div class="container">
        <p class="text-white mb-0">&copy; 2025 SalesCompass. All rights reserved.</p>
    </div>
</div>
{% endblock %}