{% extends 'core/base_module.html' %}

{% block extra_css %}
<style>
    .module-nav .nav-link.dropdown-toggle::after {
        display: none;
    }

    .module-nav .dropdown-menu {
        background-color: transparent;
        border: none;
        padding-left: 2rem;
    }

    .module-nav .section-title {
        color: #6c757d;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin: 1rem 0 0.5rem 1rem;
    }

    .module-nav .bi-chevron-down {
        transition: transform 0.3s ease;
        font-size: 0.8em;
    }

    .module-nav .nav-link[aria-expanded="true"] .bi-chevron-down {
        transform: rotate(180deg);
    }
</style>
{% endblock %}

{% block module_nav %}
<!-- Core Opportunities Functions -->
<a class="nav-link" href="{% url 'opportunities:opportunity_list' %}">
    <div class="d-flex align-items-center">
        <i class="bi bi-table nav-icon me-2"></i>
        <span>All Opportunities</span>
    </div>
</a>

<a class="nav-link" href="{% url 'opportunities:opportunity_create' %}">
    <div class="d-flex align-items-center">
        <i class="bi bi-plus-circle nav-icon me-2"></i>
        <span>New Opportunity</span>
    </div>
</a>

<!-- Pipeline Management -->
<div class="section-title">PIPELINE MANAGEMENT</div>

<a class="nav-link" href="{% url 'opportunities:pipeline_kanban' %}">
    <div class="d-flex align-items-center">
        <i class="bi bi-kanban nav-icon me-2"></i>
        <span>Pipeline Kanban</span>
    </div>
</a>

<a class="nav-link dropdown-toggle" href="#" data-bs-toggle="collapse" data-bs-target="#pipelineConfig"
    aria-expanded="false">
    <div class="d-flex align-items-center">
        <i class="bi bi-gear nav-icon me-2"></i>
        <span>Pipeline Configuration</span>
    </div>
    <i class="bi bi-chevron-down"></i>
</a>
<div class="collapse" id="pipelineConfig">
    <a class="nav-link" href="{% url 'opportunities:stage_list' %}">
        <span>Stages</span>
    </a>
    <a class="nav-link" href="{% url 'opportunities:type_list' %}">
        <span>Pipeline Types</span>
    </a>
</div>

<!-- Analytics & Reporting -->
<div class="section-title">ANALYTICS & REPORTING</div>

<a class="nav-link" href="{% url 'opportunities:sales_velocity_dashboard' %}">
    <div class="d-flex align-items-center">
        <i class="bi bi-speedometer2 nav-icon me-2"></i>
        <span>Opportunity to Sales Velocity</span>
    </div>
</a>

<a class="nav-link" href="{% url 'opportunities:forecast_dashboard' %}">
    <div class="d-flex align-items-center">
        <i class="bi bi-graph-up nav-icon me-2"></i>
        <span>Revenue Forecast</span>
    </div>
</a>

<a class="nav-link" href="{% url 'opportunities:opportunity_funnel_analysis' %}">
    <div class="d-flex align-items-center">
        <i class="bi bi-funnel nav-icon me-2"></i>
        <span>Funnel Analysis</span>
    </div>
</a>

<a class="nav-link" href="{% url 'opportunities:win_loss_analysis' %}">
    <div class="d-flex align-items-center">
        <i class="bi bi-bar-chart nav-icon me-2"></i>
        <span>Win/Loss Analysis</span>
    </div>
</a>

<!-- Automation -->
<div class="section-title">AUTOMATION</div>

<a class="nav-link" href="{% url 'opportunities:assignment_rule_list' %}">
    <div class="d-flex align-items-center">
        <i class="bi bi-magic nav-icon me-2"></i>
        <span>Assignment Rules</span>
    </div>
</a>
{% endblock %}