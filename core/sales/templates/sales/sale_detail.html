<!-- sales/templates/sales/sale_detail.html -->
{% extends 'sales/base.html' %}
{% load task_tags %}

{% block title %}{{ sale.product_name }} | SalesCompass{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="card p-4">
        <h2 class="block-title fw-bold mb-4">{{ sale.product_name }}</h2>
        <ul class="list-group">
            <li class="list-group-item"><strong>Customer:</strong> {{ sale.customer.name }}</li>
            <li class="list-group-item"><strong>Type:</strong> {{ sale.get_sale_type_display }}</li>
            <li class="list-group-item"><strong>Amount:</strong> ${{ sale.amount }}</li>
            <li class="list-group-item"><strong>Date:</strong> {{ sale.sale_date|date:"F d, Y" }}</li>
            {% if sale.converted_from_reachout %}
            <li class="list-group-item">
                <strong>Converted from:</strong>
                {{ sale.converted_from_reachout.channel|title }} outreach on
                {{ sale.converted_from_reachout.reachout_date|date:"M d, Y" }}
            </li>
            {% endif %}
        </ul>
        <div class="mt-4">
            {% render_object_tasks sale %}
        </div>
        <div class="mt-3">
            <a href="{% url 'sales:sale_update' sale.pk %}" class="btn btn-warning">Edit</a>
            <a href="{% url 'sales:sale_list' %}" class="btn btn-secondary">Back to Sales</a>
        </div>
    </div>
</div>
{% endblock %}